<!-- This fragment is returned via HTMX after upload -->
<div class="card p-3">
  <h5>Formul√°rio detectado</h5>
  <form hx-post="/fill" hx-target="#form-area" hx-swap="innerHTML" method="post">
    <input type="hidden" name="pdf_name" value="{{ pdf_name }}">

    {% for name, meta in fields.items() %}
      <div class="mb-2">
        <label class="form-label"><strong>{{ name }}</strong> <small class="text-muted">({{ meta.type }})</small></label>
        {% if meta.type == 'text' or meta.type == 'unknown' %}
          <input class="form-control" type="text" name="{{ name }}" value="{{ meta.value }}">
        {% elif meta.type == 'button' %}
          <!-- Checkbox/Radio: We render a checkbox and also a hidden input to ensure a value is submitted when checked -->
          <div class="form-check">
            <input class="form-check-input" type="checkbox" name="{{ name }}" id="{{ name }}_id" value="Yes">
            <label class="form-check-label" for="{{ name }}_id">Marcar</label>
          </div>
        {% elif meta.type == 'choice' %}
          <input class="form-control" type="text" name="{{ name }}" value="{{ meta.value }}">
        {% else %}
          <input class="form-control" type="text" name="{{ name }}" value="{{ meta.value }}">
        {% endif %}
      </div>
    {% endfor %}

    <button class="btn btn-success" type="submit">Gerar PDF preenchido</button>
  </form>
</div>
